{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/aidev/Documents/Projects/Swizce/swizce-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/aidev/Documents/Projects/Swizce/swizce-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/aidev/Documents/Projects/Swizce/swizce-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/aidev/Documents/Projects/Swizce/swizce-frontend/src/components/Signup.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { useForm } from \"react-hook-form\";\nimport { useRouter } from 'next/router';\nimport Loader from \"react-loader-spinner\";\n'react-loader-spinner';\nimport { SIGN_UP } from \"../graphql/User\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport Modal from \"./Modal/Modal\";\n\nvar Signup = function Signup() {\n  _s();\n\n  var _error$graphQLErrors$;\n\n  var _useContext = useContext(AuthContext),\n      handleAuthAction = _useContext.handleAuthAction,\n      setAuthUser = _useContext.setAuthUser;\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      errors = _useForm.errors,\n      handleSubmit = _useForm.handleSubmit;\n\n  var _useMutation = useMutation(SIGN_UP),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      signup = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      loading = _useMutation2$.loading,\n      error = _useMutation2$.error;\n\n  var router = useRouter();\n  var submitSignup = handleSubmit( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n      var username, email, password, _response$data, response, signUp;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              username = _ref.username, email = _ref.email, password = _ref.password;\n              _context.prev = 1;\n              _context.next = 4;\n              return signup({\n                variables: {\n                  username: username,\n                  email: email,\n                  password: password\n                }\n              });\n\n            case 4:\n              response = _context.sent;\n\n              if (response !== null && response !== void 0 && (_response$data = response.data) !== null && _response$data !== void 0 && _response$data.signUp) {\n                signUp = response.data.signUp;\n\n                if (signUp) {\n                  //close form\n                  handleAuthAction('close'); //Set Logged in user in context api\n\n                  setAuthUser(signUp); //push user to their dashboard page\n\n                  router.push('/Dashboard');\n                }\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              //console.log(error)\n              setAuthUser(null);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8]]);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"signup__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"__header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Join Swizce\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, _this), \"\", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"One More Thing :)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onClick: submitSignup,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__control\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"username\",\n            placeholder: \"Enter Username *\",\n            autoComplete: \"new-password\",\n            ref: register({\n              required: \"Username is required...!\",\n              minLength: {\n                value: 3,\n                message: \"Username must be at least 3 characters.\"\n              },\n              maxLength: {\n                value: 25,\n                message: \"Username must not be more than 25 characters\"\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, _this), errors.username && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.errorMessage,\n            role: \"alert\",\n            children: errors.username.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 32\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__control\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"Enter Email *\",\n            ref: register({\n              required: 'Email is required...!',\n              pattern: {\n                value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                message: \"Email is incorrect format...!\"\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, _this), errors.email && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.errorMessage,\n            role: \"alert\",\n            children: errors.email.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 28\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__control\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            placeholder: \"Enter Password *\",\n            ref: register({\n              required: 'Password is Required...!',\n              minLength: {\n                value: 6,\n                message: \"Password must be at least 6 characters.\"\n              },\n              maxLength: {\n                value: 75,\n                message: \"Password must not be more than 75 characters\"\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, _this), errors.password && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.errorMessage,\n            role: \"alert\",\n            children: errors.password.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 32\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p__forget\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Forgot password?\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: function onClick() {\n                return handleAuthAction('request');\n              },\n              children: \"Click here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__control\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: loading,\n            style: {\n              cursor: loading ? 'not-allowed' : 'pointer'\n            },\n            type: \"submit\",\n            children: loading ? /*#__PURE__*/_jsxDEV(Loader, {\n              type: \"Oval\",\n              color: \"white\",\n              height: 30,\n              width: 30,\n              timeout: 30000\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 25\n            }, _this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"https://res.cloudinary.com/swizce/image/upload/v1620702241/Swizce/images/login_qgoycx.png\",\n              width: \"32px\",\n              height: \"32px\",\n              color: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, _this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: ((_error$graphQLErrors$ = error.graphQLErrors[0]) === null || _error$graphQLErrors$ === void 0 ? void 0 : _error$graphQLErrors$.message) || /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.errorMessage,\n              children: \"Sorry something went wrong...!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 65\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 24\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__control\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: function onClick() {\n                return handleAuthAction('signin');\n              },\n              children: \"Signin Now!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 38\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, _this);\n}; //Styling page here\n\n\n_s(Signup, \"DyjvSgI5Lly/iCHO1oVqh3/TWsM=\", false, function () {\n  return [useForm, useMutation, useRouter];\n});\n\n_c = Signup;\nvar styles = {\n  errorMessage: {\n    margin: 0,\n    padding: 0,\n    color: 'red',\n    fontSize: '.7rem'\n  }\n};\nexport default Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["/Users/aidev/Documents/Projects/Swizce/swizce-frontend/src/components/Signup.tsx"],"names":["React","useContext","useMutation","useForm","useRouter","Loader","SIGN_UP","AuthContext","Modal","Signup","handleAuthAction","setAuthUser","register","errors","handleSubmit","signup","loading","error","router","submitSignup","username","email","password","variables","response","data","signUp","push","required","minLength","value","message","maxLength","styles","errorMessage","pattern","cursor","graphQLErrors","margin","padding","color","fontSize"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { useForm } from \"react-hook-form\";\nimport { useRouter } from 'next/router';\nimport { SignupArgs, User } from \"../types\";\nimport Loader from \"react-loader-spinner\"; 'react-loader-spinner';\n\n\nimport { SIGN_UP } from \"../graphql/User\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport Modal from \"./Modal/Modal\";\n\ninterface Props {}\n\nconst Signup: React.FC<Props> = () => {\n\n  const { handleAuthAction, setAuthUser } = useContext(AuthContext);\n\n  const { register, errors, handleSubmit } = useForm<SignupArgs>();\n\n  const [signup, { loading, error }] = useMutation<{ signUp: User }, SignupArgs>(SIGN_UP);\n\n\n  const router = useRouter();\n\n\n\n\n  const submitSignup = handleSubmit( async ({ username, email, password }) => {\n\n    try {\n      const response = await signup({ variables: {username, email, password}});\n\n\n      if(response?.data?.signUp){\n         const { signUp } = response.data;\n\n         if(signUp){\n           //close form\n            handleAuthAction('close');\n\n\n           //Set Logged in user in context api\n           setAuthUser(signUp);\n\n           //push user to their dashboard page\n           router.push('/Dashboard')\n         }\n      }\n    } catch (error) {\n      //console.log(error)\n      setAuthUser(null)\n    }\n  });\n\n  \n  return (\n    <Modal>\n      <div className=\"signup__container\">\n        <div className=\"__header\">\n          <h2>Join Swizce</h2>\n          {\"\"}\n          <span>One More Thing :)</span>\n        </div>\n\n        <form onClick={submitSignup}>\n          <div className=\"form__control\">\n            <input\n            type=\"text\"\n            name=\"username\"\n            placeholder=\"Enter Username *\"\n            autoComplete=\"new-password\"\n            ref={register({\n              required: \"Username is required...!\",\n              minLength: {\n                value: 3,\n                message: \"Username must be at least 3 characters.\",\n              },\n              maxLength: {\n                value: 25,\n                message: \"Username must not be more than 25 characters\",\n              },\n            })}\n          />\n           {errors.username && <span style={styles.errorMessage} role=\"alert\">{errors.username.message}</span>}\n          </div>\n\n          <div className=\"form__control\">\n            <input\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Enter Email *\"\n            ref={register({\n              required: 'Email is required...!',\n              pattern: {\n                value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                message: \"Email is incorrect format...!\",\n              },\n            })}\n          />\n          {errors.email && <span  style={styles.errorMessage} role=\"alert\">{errors.email.message}</span>}\n          </div>\n\n          <div className=\"form__control\">\n            <input\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Enter Password *\"\n            ref={register({\n              required: 'Password is Required...!',\n              minLength: {\n                value: 6,\n                message: \"Password must be at least 6 characters.\",\n              },\n              maxLength: {\n                value: 75,\n                message: \"Password must not be more than 75 characters\",\n              },\n            })}\n          />\n           {errors.password && <span style={styles.errorMessage} role=\"alert\">{errors.password.message}</span>}\n          </div>\n\n          <div className=\"p__forget\">\n            <p>\n              Forgot password?{\" \"}\n              <span onClick={() => handleAuthAction('request')}>\n                    Click here\n                </span>\n            </p>\n          </div>\n\n          <div className=\"form__control\">\n            <button disabled={loading} style={{cursor: loading ? 'not-allowed' : 'pointer'}} type=\"submit\">\n            { loading ? <Loader type='Oval' color='white' height={30} width={30} timeout={30000} /> : \n                <img\n                src=\"https://res.cloudinary.com/swizce/image/upload/v1620702241/Swizce/images/login_qgoycx.png\"\n                width=\"32px\"\n                height=\"32px\"\n                color=\"white\"\n              />\n            }\n            </button>\n            {\n              error && <div>{error.graphQLErrors[0]?.message || <p style={styles.errorMessage}>Sorry something went wrong...!</p>}</div>\n            }\n            </div>\n\n            <div className=\"form__control\">\n            <a>\n              Don't have an account? <span onClick={() => handleAuthAction('signin')}>Signin Now!</span>\n            </a>\n          </div>\n        </form>\n      </div>\n    </Modal>\n  );\n};\n\n//Styling page here\nconst styles = {\n  errorMessage: {\n    margin: 0, \n    padding: 0, \n    color: 'red', \n    fontSize: '.7rem'\n  }\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}