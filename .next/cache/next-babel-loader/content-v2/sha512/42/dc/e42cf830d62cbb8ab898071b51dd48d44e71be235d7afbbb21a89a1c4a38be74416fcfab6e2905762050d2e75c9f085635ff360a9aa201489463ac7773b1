{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/aidev/Documents/Projects/Swizce/swizce-frontend/src/components/Scream/uploads/UploadItem.tsx\";\nimport React, { useEffect, useState } from \"react\";\nexport function UploadItems({\n  file\n}) {\n  const {\n    0: progress,\n    1: setProgress\n  } = useState(0);\n  useEffect(() => {\n    async function upload() {\n      const url = await UploadFile(file, setProgress);\n      console.log('url', url);\n    }\n\n    upload();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"list__upload__item\",\n    children: [\"SFL-\", progress]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 10\n  }, this);\n}\n\nfunction UploadFile(file, onProgress) {\n  const url = 'https://api.cloudinary.com/v1_1/swizce/image/upload';\n  const key = 'doc_upload_example_us_preset';\n  return new Promise((res, rej) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open('POST', url);\n\n    xhr.onload = () => {\n      const resp = JSON.parse(xhr.responseText);\n      res(resp.secure_url);\n    };\n\n    xhr.onerror = evt => rej(evt);\n\n    xhr.upload.onprogress = event => {\n      if (event.lengthComputable) {\n        const percentage = event.loaded / event.total * 100;\n        onProgress(Math.round(percentage));\n      }\n    };\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('keys', key);\n    xhr.send(formData);\n  });\n}","map":{"version":3,"sources":["/Users/aidev/Documents/Projects/Swizce/swizce-frontend/src/components/Scream/uploads/UploadItem.tsx"],"names":["React","useEffect","useState","UploadItems","file","progress","setProgress","upload","url","UploadFile","console","log","onProgress","key","Promise","res","rej","xhr","XMLHttpRequest","open","onload","resp","JSON","parse","responseText","secure_url","onerror","evt","onprogress","event","lengthComputable","percentage","loaded","total","Math","round","formData","FormData","append","send"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAOA,OAAO,SAASC,WAAT,CAAqB;AAAEC,EAAAA;AAAF,CAArB,EAAgD;AACrD,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0BJ,QAAQ,CAAC,CAAD,CAAxC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeM,MAAf,GAAwB;AACtB,YAAMC,GAAG,GAAG,MAAMC,UAAU,CAACL,IAAD,EAAOE,WAAP,CAA5B;AAEAI,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBH,GAAnB;AACD;;AAEDD,IAAAA,MAAM;AACP,GARQ,EAQN,EARM,CAAT;AASA,sBAAO;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA,uBACAF,QADA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAGD;;AAED,SAASI,UAAT,CAAoBL,IAApB,EAAgCQ,UAAhC,EAAyE;AACvE,QAAMJ,GAAG,GAAG,qDAAZ;AACA,QAAMK,GAAG,GAAG,8BAAZ;AACA,SAAO,IAAIC,OAAJ,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC/B,UAAMC,GAAG,GAAG,IAAIC,cAAJ,EAAZ;AACAD,IAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAiBX,GAAjB;;AAEAS,IAAAA,GAAG,CAACG,MAAJ,GAAa,MAAM;AACjB,YAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWN,GAAG,CAACO,YAAf,CAAb;AACAT,MAAAA,GAAG,CAACM,IAAI,CAACI,UAAN,CAAH;AACD,KAHD;;AAKAR,IAAAA,GAAG,CAACS,OAAJ,GAAeC,GAAD,IAASX,GAAG,CAACW,GAAD,CAA1B;;AAEAV,IAAAA,GAAG,CAACV,MAAJ,CAAWqB,UAAX,GAAyBC,KAAD,IAAW;AACjC,UAAGA,KAAK,CAACC,gBAAT,EAA2B;AACzB,cAAMC,UAAU,GAAIF,KAAK,CAACG,MAAN,GAAaH,KAAK,CAACI,KAApB,GAA6B,GAAhD;AACArB,QAAAA,UAAU,CAACsB,IAAI,CAACC,KAAL,CAAWJ,UAAX,CAAD,CAAV;AACD;AACF,KALD;;AAOA,UAAMK,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AAEAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBlC,IAAxB;AACAgC,IAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBzB,GAAxB;AAGAI,IAAAA,GAAG,CAACsB,IAAJ,CAASH,QAAT;AACD,GAzBM,CAAP;AA0BD","sourcesContent":["import React, { useEffect, useState } from \"react\"\n\nexport interface UploadItemsProps {\n  file: File;\n}\n\n\nexport function UploadItems({ file }: UploadItemsProps){\n  const [progress, setProgress] = useState(0)\n\n  useEffect(() => {\n    async function upload() {\n      const url = await UploadFile(file, setProgress);\n\n      console.log('url', url)\n    }\n\n    upload();\n  }, []);\n  return <div className=\"list__upload__item\">\n    SFL-{progress}\n  </div>\n}\n\nfunction UploadFile(file: File, onProgress: (percentage: number) => void){\n  const url = 'https://api.cloudinary.com/v1_1/swizce/image/upload';\n  const key = 'doc_upload_example_us_preset'\n  return new Promise((res, rej) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open('POST', url);\n\n    xhr.onload = () => {\n      const resp = JSON.parse(xhr.responseText);\n      res(resp.secure_url);\n    }\n\n    xhr.onerror = (evt) => rej(evt);\n\n    xhr.upload.onprogress = (event) => {\n      if(event.lengthComputable) {\n        const percentage = (event.loaded/event.total) * 100;\n        onProgress(Math.round(percentage))\n      }\n    }\n\n    const formData = new FormData();\n\n    formData.append('file', file);\n    formData.append('keys', key);\n\n\n    xhr.send(formData)\n  })\n}\n"]},"metadata":{},"sourceType":"module"}